\ProvidesPackage{config/loot}
\newcounter{treasure}
\setcounter{treasure}{\month}

%%%%%%%%%%%%%%%%%%%% LOOT %%%%%%%%%%%%%%%%%%%%

\newcommand{\lootSmall}{%
	\iftoggle{bestiarychapter}{%
		\ifodd\value{r2}%
			$3D6$\else$2D6$%
		\fi \glspl{cp}}{%
		\randomdozen\multiply\value{r12} by \value{r4}\arabic{r12} \glspl{cp}}%
}

\newcommand{\lootMedium}{%
	\iftoggle{bestiarychapter}{%
		\ifodd\value{r2}%
			$3D6$%
		\else%
			$2D6$%
		\fi~\glspl{sp}}{%
		\addtocounter{gold}{\thepage}%
		\divide\value{gold} by \value{r4}%
		\ifnum\value{gold}<4%
			\setcounter{gold}{7}%
		\fi%
		\arabic{gold}~\glspl{sp}}%
}

\newcommand{\lootBig}{%
\iftoggle{bestiarychapter}{%
	\ifodd\thepage $3D6-2$\else$2D6+4$\fi \glspl{gp}}{%
	\randomdozen\addtocounter{r12}{8}\arabic{r12}\glspl{gp}%
	}%
}

\newcommand{\lootMagic}{%
	\iftoggle{team}{Mana stone holding 2 MP}%
  {\iftoggle{bestiarychapter}{}%
    {%
      \stepcounter{treasure}%
      \ifnum\value{treasure}>10\setcounter{treasure}{0}\fi%
      \ifcase\value{treasure}\relax%
        Sorcerer's Eye%
      \or%1
        quiver with \arabic{r12} Spider Arrows%
      \or%2
        pouch of Wild Seeds%
      \or%3
        Bag of Holding%
      \or%4
        Defensive Heart%
      \or%5
        Portal Scroll%
      \or%6
        Sleeping Dust%
      \or%7
        Ring of Asphyxiation%
      \or%8
        Ghost Shield%
      \or%9
        Bag of Tricks%
      \else%10
        Mana Stone with 4 \glspl{mp}%
      \fi%
    }%
  }%
}

\newcommand{\lootJewellery}{%
\iftoggle{bestiarychapter}{jewellery worth \ifodd\value{r2}$3D6$sp\else$1D6+2$\glspl{gp}\fi}%
	{\ifnumcomp{\value{r2}}{>}{1}{\ifodd\value{r3}%
		\ifodd\value{r4}%
			golden necklace worth \arabic{r12}~\glspl{sp}\else%
			golden ring worth \thechapter~\glspl{sp}\fi\else%
		jewel encrusted dagger worth \thepage~\glspl{sp}\fi}%
	{\ifodd\value{r3}%
		\ifodd\value{r4}%
			ornate silver earrings worth 1 \glspl{gp}\else
			gem encrusted broach worth \thechapter \glspl{gp}\fi\else%
		\randomthreeB saphire pendant worth \arabic{r3b}\glspl{gp}\fi}}}

