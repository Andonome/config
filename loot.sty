\ProvidesPackage{config/loot}
\newcounter{treasure}
\setcounter{treasure}{\month}

%%%%%%%%%%%%%%%%%%%% LOOT %%%%%%%%%%%%%%%%%%%%


\newcommand\rations{%
  \ifcase\value{treasure}\relax%
  \or%
    smoked ham%
  \or%
    \ifnum\value{temperature}>1%
      dried fruits%
    \else%
      pickled veggies%
    \fi%
  \or%
    \ifnum\value{cycle}>1%
      stinky cheese%
    \else%
      fruit leather%
    \fi%
  \or%
    pork rind cracklings%
  \or%
    brined cheese%
  \or%
    auroch tongue%
  \or%
    sujuk sausages%
  \or%
    carrot-biscuits%
  \or%
    sack of oats%
  \or%
    honey-walnut cake%
  \or%
    lisk-strips%
  \or%
    flaggon o' porry%
  \or%
    goat cheese%
  \else%
    \setcounter{treasure}{0}%
    rye bread%
  \fi%
  \stepcounter{treasure}%
}%

\newcounter{goblinLoot}
\setcounter{goblinLoot}{\day}
\divide\value{goblinLoot} by 4

\newcommand{\lootGoblin}{%
  \stepcounter{goblinLoot}%
  \ifcase\value{goblinLoot}\relax%
  \or%
    \stepcounter{r4}%
    tinder box and \arabic{r4} candles%
  \or%
    1~\gls{sp} from the far North (hexagonal, depicts strange animal)%
  \or%
    1~\gls{sp} from the far South (looks like a crowned skull)%
  \or%
    pouch of long, dark, humanoid hair%
  \or%
    rotten mushrooms%
  \or%
    tiny brass bell%
  \or%
    flask of lantern oil%
  \or%
    leather pouch filled with colorful egg shells%
  \or%
    small torch%
  \or%
    small shaker filled with dried beans%
  \or%
    tobacco pipe%
  \or%
    \arabic{r2t3}~sacks%
  \or%
    a horse's tail%
  \or%
    lump of clay with an ex-lover's bitemarks%
  \or%
    20' of rope%
  \or%
    polished sphere of snow-white quartz%
  \or%
    tinder box%
  \or%
    ratking shaul%
  \or%
    empty~sack%
  \or%
    bag of 4 rocks%
  \or%
    lock-picking set%
  \or%
    1~\gls{gp} from the far \ifodd\value{r2}West (looks like a map)\else East (face looks like \ifodd\value{r4b} an elf\else a gnoll\fi?)\fi%
  \else%
    wine bottle filled with dead spiders%
    \setcounter{goblinLoot}{0}%
  \fi%
}

\newcommand\goblinLight{%
  \ifcase\value{r3}\relax%
  \or%
    glowing belly from eating \glsfmtplural{glowshroom}%
  \or%
    shroom-candle%
  \else%
    fat candle%
  \fi%
}

\newcommand{\lootSmall}{%
	\iftoggle{genExamples}{%
		\ifodd\value{r2}%
			$3D6$\else$2D6$%
		\fi~\glspl{cp}}{%
      \randomize%
      \arabic{r12}~\glspl{cp}%
  }%
}

\newcommand{\lootMedium}{%
	\iftoggle{genExamples}{%
		\ifodd\value{r2}%
			$3D6$%
		\else%
			$2D6$%
		\fi~\glsfmtplural{sp}}{%
    \randomize%
		\setcounter{gold}{\value{r12}}%
    \multiply\value{gold} by 3 \arabic{gold}~\glspl{sp}}%
}

\newcommand{\lootBig}{%
  \iftoggle{genExamples}{%
      $3D6-2$~\glspl{gp}%
    }{%
      \randomize\addtocounter{r12}{8}%
      \arabic{r12}\glspl{gp}%
    }%
}

\newcommand{\lootTalisman}{%
  \iftoggle{genExamples}{}%
    {%
      \ifcase\value{treasure}\relax%
      \or%
        \scrollOfFriendship%
      \or%
        \verdantBerries%
      \or%
        \oceanPhial%
      \or%
        \wotWosFungus%
      \or%
        \hagFinger%
      \or%
        \safetyScroll%
      \or%
        \minersWeed%
      \else%
        \bloodCandle%
        \setcounter{treasure}{0}%
      \fi%
      \ignorespaces\spellName%
      \setcounter{track}{\value{treasure}}%
      \stepcounter{treasure}%
    }%
}

\newcommand{\lootMagic}{%
  \stepcounter{equipmentWeight}%
  \iftoggle{genExamples}{%
    elemental \glsentrytext{boon}%
    }%
    {%
      \ifcase\value{r6}\relax%
      \or%
        Water~\gls{boon}%
      \or%
        Earth~\gls{boon}%
      \or%
        Air~\gls{boon}%
      \or%
        Fire~\gls{boon}%
      \else%
        Fate~\gls{boon}%
      \fi%
    }%
}

\newcommand{\lootJewellery}{%
\iftoggle{genExamples}{jewellery worth~\ifodd\value{r2}$3D6$~\glspl{sp}\else$1D6+2$~\glspl{gp}\fi}%
	{%
    \randomize%
    \ifcase\value{treasure}\relax%
    \or%
			golden necklace (worth~\arabic{r12}~\glspl{sp})%
    \or%
			golden serpent-ring (worth~\arabic{r12}~\glspl{sp})%
    \or%
      jewel encrusted dagger (worth~\arabic{r12}~\glspl{sp})%
    \or%
      silver horn-shaped earrings (worth~1~\glspl{gp})%
    \or%
      gem encrusted broach (worth~\arabic{r4b}~\glspl{gp})%
    \or%
      saphire pendant (worth~\arabic{r3b}~\glspl{gp})%
    \or%
      gem-encrusted headband (worth~\arabic{r6}~\glspl{gp})%
    \or%
      gold-looking necklage made from fool's gold (worthless)%
    \or%
      gem-studded ring (worth~\arabic{r12}~\glspl{sp})%
    \or%
      signet ring (worth~\arabic{r2}~\glspl{gp})%
    \else%
      gem-studded ring (worth~\arabic{r12}~\glspl{sp})%
      \setcounter{treasure}{0}%
    \fi%
    \stepcounter{treasure}%
  }%
}

